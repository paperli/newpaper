<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Bezier Curve</title></head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
	<script type="text/javascript">
	
	var canvas_center = {x:400,y:400}
	var density = 0.01;
	var t = 0;
	
	function canvasSupport(){
		return !!window.HTMLCanvasElement;
	}
	
	$(document).ready(function(){
		canvasApp();
	});
	
	function canvasApp(){
		if (!canvasSupport()){
			return;
		}
		
		canvas = document.getElementById("myCanvas");
		ctx  = canvas.getContext("2d");
		canvas_center = {x:canvas.width/2,y:canvas.height/2};
		radius = 400;
		
		points = [[{x:400,y:180},{x:360,y:180},{x:295,y:225},{x:267,y:250}],
					[{x:267,y:250},{x:224,y:287},{x:200,y:342},{x:200,y:400}],
					[{x:200,y:400},{x:200,y:510},{x:289,y:600},{x:400,y:600}],
					[{x:400,y:600},{x:510,y:600},{x:600,y:510},{x:600,y:400}],
					[{x:600,y:400},{x:600,y:343},{x:574,y:287},{x:531,y:250}],
					[{x:531,y:250},{x:503,y:225},{x:440,y:180},{x:400,y:180}]];
		
		var angle = 0;
		var zap = 20*Math.random()-10;
		var zap_temp = 0;
		var init = true;
		
		//init draw
		draw();
		
		function setZap(){
			zap = 20*Math.random()-10;
		}
		
		function draw(){
			
			now = new Date();
			hour = now.getHours()%12;
			minute = now.getMinutes();
			angle = 2*Math.PI*(hour*60+minute)/(12*60);
			console.log(180*angle/Math.PI);
			
			canvas.width = canvas.width;
			ctx.translate(canvas.width/2,canvas.height/2);
			ctx.rotate(angle);
			ctx.translate(-canvas.width/2,-canvas.height/2);
			/*if (!init){
				angle += 1;
				canvas.width = canvas.width;
				ctx.translate(canvas.width/2,canvas.height/2);
				ctx.rotate(Math.PI*angle/180);
				ctx.translate(-canvas.width/2,-canvas.height/2);
			}*/
			init = false;
			ctx.lineWidth=1;
			ctx.strokeStyle="#c3c3c3";
			ctx.fillStyle="rgba(200,200,200,0.3)";
			//ctx.shadowColor = "rgba(0,0,0,0.3)";
			//ctx.shadowBlur = 10;
			//ctx.shadowOffsetY = 0;
			ctx.beginPath();
			
			//console.log(points[0][0]);
			//zap = 6*Math.random()-3;
			archive = points[0][0].y;	
			
			zap_temp += (zap - zap_temp)*0.01;
			points[0][0].y += zap_temp;
			points[0][1].y += zap_temp;
			points[points.length-1][2].y += zap_temp;
			points[points.length-1][3].y += zap_temp;
			
			ctx.moveTo(points[0][0].x,points[0][0].y);
			for(var a = 0;a<points.length;a++){
				
				ctx.bezierCurveTo(points[a][1].x,points[a][1].y,points[a][2].x,points[a][2].y,points[a][3].x,points[a][3].y);
			
			}
			ctx.closePath();
			ctx.stroke();
			//ctx.globalAlpha = 0.5;
			ctx.fill();			
			
			//console.log(angle);
			
			
			points[0][0].y = points[0][1].y = points[points.length-1][3].y = points[points.length-1][2].y = archive;
			//console.log(points[0][0]);
		}
		
		setInterval(draw,10);
		setInterval(setZap,500);
		/*for (var i=0;i<1/density;i++){
			t += density;
			bx = (1-t)*(1-t)*(1-t)*p0.x+3*(1-t)*(1-t)*t*p1.x+3*(1-t)*t*t*p2.x+t*t*t*p3.x;
			by = (1-t)*(1-t)*(1-t)*p0.y+3*(1-t)*(1-t)*t*p1.y+3*(1-t)*t*t*p2.y+t*t*t*p3.y;
			ctx.fillStyle="#3c3c3c";
			//ctx.moveTo(bx,by);
			ctx.beginPath();
			ctx.arc(bx,by,2,0,Math.PI*2,true);
			ctx.closePath();
			ctx.fill();
		}*/
	}
	
	</script>
<body>
<canvas width="800" height="800" id="myCanvas">!!Your Browser Sucks!!</canvas>
</body>
</html>
